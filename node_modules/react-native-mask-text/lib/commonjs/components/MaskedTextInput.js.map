{"version":3,"names":["MaskedTextInputComponent","ref","mask","pattern","type","options","defaultValue","onChangeText","value","inputAccessoryView","autoCapitalize","textBold","textItalic","textDecoration","style","rest","styleSheet","fontWeight","fontStyle","textDecorationLine","isMasked","getMaskedValue","getUnMaskedValue","unMask","updateStatesWithMasking","inputValue","newUnMaskedValue","newMaskedValue","setMaskedValue","setUnmaskedValue","setRawValue","updateStatesWithoutMasking","clearAllStates","defaultValueCustom","defaultValueCurrency","initialRawValue","initialMaskedValue","initialUnMaskedValue","maskedValue","useState","unMaskedValue","rawValue","isInitialRender","setIsInitialRender","actualValue","handleChange","useEffect","length","undefined","MaskedTextInput","forwardRef"],"sources":["MaskedTextInput.tsx"],"sourcesContent":["import React, {\n  useEffect,\n  useState,\n  forwardRef,\n  ForwardRefRenderFunction,\n} from 'react'\nimport { TextInput, TextInputProps } from 'react-native'\nimport { mask, unMask } from '../utils/mask'\nimport type { FormatType, MaskOptions, StyleObj, TextDecorationOptions } from 'src/@types'\n\n\ntype TIProps = Omit<TextInputProps, 'onChangeText'>\nexport interface MaskedTextInputProps extends TIProps {\n  mask?: string\n  type?: FormatType\n  options?: MaskOptions\n  defaultValue?: string\n  onChangeText: (text: string, rawText: string) => void\n  inputAccessoryView?: JSX.Element\n  textBold?: boolean\n  textItalic?:boolean\n  textDecoration?:TextDecorationOptions\n  style?: StyleObj\n}\n\nexport const MaskedTextInputComponent: ForwardRefRenderFunction<\n  TextInput,\n  MaskedTextInputProps\n> = (\n  {\n    mask: pattern = '',\n    type = 'custom',\n    options = {} as MaskOptions,\n    defaultValue,\n    onChangeText,\n    value,\n    inputAccessoryView,\n    autoCapitalize = 'sentences',\n    textBold,\n    textItalic,\n    textDecoration,\n    style,\n    ...rest\n  },\n  ref\n): JSX.Element => {\n  const styleSheet = [\n    {\n      fontWeight: textBold && 'bold',\n      fontStyle: textItalic && 'italic',\n      textDecorationLine: textDecoration\n    },\n    style\n  ]\n  \n  const isMasked = () => pattern || type === 'currency'\n  \n  const getMaskedValue = (value: string) =>\n    mask(value, pattern, type, options, autoCapitalize)\n  \n  const getUnMaskedValue = (value: string) =>\n    unMask(value, type as 'custom' | 'currency')\n\n  const updateStatesWithMasking = (inputValue: string) => {\n    const newUnMaskedValue = getUnMaskedValue(inputValue)\n    const newMaskedValue = getMaskedValue(newUnMaskedValue)\n    \n    setMaskedValue(newMaskedValue)\n    setUnmaskedValue(newUnMaskedValue)\n    setRawValue(inputValue)\n  }\n\n  const updateStatesWithoutMasking = (inputValue: string) => {\n    setMaskedValue(inputValue)\n    setUnmaskedValue(inputValue)\n    setRawValue(inputValue)\n  }\n\n  const clearAllStates = () => {\n    setMaskedValue('')\n    setUnmaskedValue('')\n    setRawValue('')\n  }\n\n  const defaultValueCustom = defaultValue || ''\n  const defaultValueCurrency = defaultValue || '0'\n  const initialRawValue = value\n\n  const initialMaskedValue = isMasked()\n    ? getMaskedValue(type === 'currency' ? defaultValueCurrency : defaultValueCustom)\n    : (value || defaultValueCustom)\n\n  const initialUnMaskedValue = isMasked()\n    ? getUnMaskedValue(type === 'currency' ? defaultValueCurrency : defaultValueCustom)\n    : (value || defaultValueCustom)\n\n  const [maskedValue, setMaskedValue] = useState(initialMaskedValue)\n  const [unMaskedValue, setUnmaskedValue] = useState(initialUnMaskedValue)\n  const [rawValue, setRawValue] = useState(initialRawValue)\n  const [isInitialRender, setIsInitialRender] = useState(true)\n\n  const actualValue = isMasked() ? maskedValue : rawValue\n\n\n  const handleChange = (inputValue: string) => {\n    if (isMasked()) {\n      updateStatesWithMasking(inputValue)\n    } else {\n      updateStatesWithoutMasking(inputValue)\n    }\n  }\n\n  useEffect(() => {\n    if (isInitialRender) {\n      setIsInitialRender(false)\n      return\n    }\n\n    if (isMasked()) {\n      onChangeText(maskedValue, unMaskedValue)\n    } else {\n      onChangeText(rawValue || '', rawValue || '')\n    }\n  }, [maskedValue, unMaskedValue, rawValue])\n\n  useEffect(() => {\n    if (value) {\n      if (isMasked()) {\n        setMaskedValue(getMaskedValue(value))\n        setUnmaskedValue(getUnMaskedValue(value))\n      } else {\n        updateStatesWithoutMasking(value)\n      }\n    } else {\n      if (isMasked()) {\n        setMaskedValue(initialMaskedValue)\n        setUnmaskedValue(initialUnMaskedValue)\n      } else {\n        clearAllStates()\n      }\n    }\n  }, [value])\n\n  return (\n    <>\n      <TextInput\n        onChangeText={handleChange}\n        ref={ref}\n        maxLength={pattern.length || undefined}\n        autoCapitalize={autoCapitalize}\n        {...rest}\n        value={actualValue}\n        style={styleSheet as StyleObj}\n      />\n      {inputAccessoryView}\n    </>\n  )\n}\n\nexport const MaskedTextInput = forwardRef(MaskedTextInputComponent)\n"],"mappings":"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"}